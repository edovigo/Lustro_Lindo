<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LustroLindo ‚Äî Il tuo maggiordomo digitale</title>
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<style>
  body { background:#F7F4EB; font-family:'Inter', system-ui, sans-serif; }
  .navy { color:#0A2342; }
  .bg-navy { background:#0A2342; }
  .btn-primary { background:#0A2342; color:white; border-radius:12px; padding:10px 18px; font-weight:600; transition:.2s; font-size:14px; border:none; cursor:pointer; }
  .btn-primary:hover{opacity:.85;}
  .card{background:white;border-radius:22px;box-shadow:0 10px 25px rgba(0,0,0,.08); transition: transform 0.3s;}
  .card:hover{transform: translateY(-5px);}
  .lang-toggle {cursor:pointer; font-weight:bold; font-size:20px; transition: transform 0.2s;}
  .lang-toggle:hover { transform: scale(1.1); }
  .dropdown {position:relative; display:inline-block;}
  .dropdown-content {display:none; position:absolute; right:0; background:white; min-width:220px; box-shadow:0 8px 16px rgba(0,0,0,.2); border-radius:12px; z-index:110;}
  .dropdown-content button {padding:12px 16px; display:block; width:100%; text-align:left; border:none; background:none; cursor:pointer;}
  .dropdown:hover .dropdown-content {display:block;}
  .dropdown-content button:hover {background:#f2f2f2;}

  /* Booking overlay */
  #bookingOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(8px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 5000;
    animation: fadeIn 0.3s ease;
  }
  #bookingPanel {
    background: white;
    border-radius: 24px;
    width: 90%;
    max-width: 700px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 30px 80px rgba(0,0,0,0.3);
    animation: slideUp 0.4s ease;
    position: relative;
  }
  @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
  @keyframes slideUp { from{opacity:0; transform:translateY(30px);} to{opacity:1; transform:translateY(0);} }
  
  .progress-bar {
    height: 6px;
    background: #e5e7eb;
    border-radius: 10px 10px 0 0;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #0A2342, #0077CC);
    transition: width 0.4s ease;
  }
  
  .panel-header {
    padding: 30px 30px 20px 30px;
    border-bottom: 1px solid #f3f4f6;
  }
  .panel-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    font-size: 24px;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
  }
  .panel-close:hover {
    background: #f3f4f6;
    color: #0A2342;
  }
  
  .panel-content {
    padding: 30px;
  }
  
  .service-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-top: 20px;
  }
  .service-card {
    background: linear-gradient(135deg, rgba(247,251,255,0.8), rgba(255,255,255,1));
    border: 2px solid #e5e7eb;
    border-radius: 16px;
    padding: 24px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
  }
  .service-card:hover {
    border-color: #0077CC;
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,119,204,0.15);
  }
  .service-card.selected {
    border-color: #0077CC;
    background: linear-gradient(135deg, rgba(0,119,204,0.1), rgba(10,35,66,0.05));
    box-shadow: 0 10px 25px rgba(0,119,204,0.2);
  }
  .service-icon {
    font-size: 48px;
    margin-bottom: 12px;
  }
  .service-name {
    font-weight: 700;
    font-size: 16px;
    color: #0A2342;
    margin-bottom: 6px;
  }
  .service-desc {
    font-size: 13px;
    color: #6b7280;
  }
  
  .calendar-container {
    margin-top: 20px;
  }
  .calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
  }
  .calendar-month {
    font-weight: 700;
    font-size: 18px;
    color: #0A2342;
  }
  .calendar-nav {
    display: flex;
    gap: 8px;
  }
  .calendar-nav button {
    background: #f3f4f6;
    border: none;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 18px;
  }
  .calendar-nav button:hover {
    background: #e5e7eb;
  }
  .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
  }
  .calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
  }
  .calendar-day.disabled {
    color: #d1d5db;
    cursor: not-allowed;
  }
  .calendar-day:not(.disabled):hover {
    background: #f3f4f6;
  }
  .calendar-day.selected {
    background: linear-gradient(135deg, #0A2342, #0077CC);
    color: white;
    border-color: #0077CC;
  }
  .calendar-weekday {
    font-size: 12px;
    font-weight: 700;
    color: #6b7280;
    text-align: center;
    margin-bottom: 8px;
  }
  
  .time-slots {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
    margin-top: 20px;
  }
  .time-slot {
    background: #f9fafb;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 600;
    font-size: 14px;
  }
  .time-slot:hover {
    border-color: #0077CC;
    background: rgba(0,119,204,0.05);
  }
  .time-slot.selected {
    background: linear-gradient(135deg, #0A2342, #0077CC);
    color: white;
    border-color: #0077CC;
  }
  
  .cleaner-grid {
    display: grid;
    gap: 16px;
    margin-top: 20px;
  }
  .cleaner-card {
    background: linear-gradient(135deg, rgba(247,251,255,0.8), rgba(255,255,255,1));
    border: 2px solid #e5e7eb;
    border-radius: 16px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    gap: 16px;
    align-items: center;
  }
  .cleaner-card:hover {
    border-color: #0077CC;
    box-shadow: 0 10px 25px rgba(0,119,204,0.15);
  }
  .cleaner-card.selected {
    border-color: #0077CC;
    background: linear-gradient(135deg, rgba(0,119,204,0.1), rgba(10,35,66,0.05));
    box-shadow: 0 10px 25px rgba(0,119,204,0.2);
  }
  .cleaner-avatar {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    background: linear-gradient(135deg, #e6f0ff, #cfe6ff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    flex-shrink: 0;
  }
  .cleaner-info {
    flex: 1;
  }
  .cleaner-name {
    font-weight: 700;
    font-size: 16px;
    color: #0A2342;
    margin-bottom: 4px;
  }
  .cleaner-meta {
    display: flex;
    gap: 12px;
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
  }
  .cleaner-badge {
    display: inline-block;
    background: #dbeafe;
    color: #1e40af;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 700;
  }
  
  .summary-box {
    background: linear-gradient(135deg, rgba(10,35,66,0.03), rgba(0,119,204,0.03));
    border-radius: 16px;
    padding: 24px;
    margin-top: 20px;
  }
  .summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    font-size: 15px;
  }
  .summary-row:last-child {
    margin-bottom: 0;
    padding-top: 12px;
    border-top: 2px solid rgba(0,0,0,0.05);
    font-weight: 700;
    font-size: 18px;
  }
  
  .panel-buttons {
    display: flex;
    gap: 12px;
    margin-top: 30px;
  }
  .btn-back {
    flex: 1;
    background: #f3f4f6;
    color: #374151;
    border: none;
    padding: 14px;
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-back:hover {
    background: #e5e7eb;
  }
  .btn-next {
    flex: 2;
    background: linear-gradient(90deg, #0A2342, #0077CC);
    color: white;
    border: none;
    padding: 14px;
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 12px rgba(0,119,204,0.3);
  }
  .btn-next:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,119,204,0.4);
  }
  .btn-next:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  /* Login modal */
  .ll-overlay {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 120;
    -webkit-backdrop-filter: blur(6px);
    backdrop-filter: blur(6px);
    background: rgba(10,16,30,0.28);
  }
  .ll-card {
    width: 920px;
    max-width: 94vw;
    border-radius: 16px;
    overflow: hidden;
    display: flex;
    box-shadow: 0 30px 80px rgba(8,12,20,.25);
    background: linear-gradient(180deg, rgba(255,255,255,0.86), rgba(250,250,252,0.78));
    border: 1px solid rgba(255,255,255,0.6);
    transform: translateY(12px) scale(.98);
    opacity: 0;
    transition: transform .28s cubic-bezier(.2,.9,.32,1), opacity .25s ease;
  }
  .ll-card.show { transform: translateY(0) scale(1); opacity: 1; }
  .ll-left { width: 42%; min-width: 300px; padding: 36px; background: linear-gradient(180deg, rgba(247,251,255,0.85), rgba(242,248,255,0.6)); display:flex; flex-direction:column; gap:14px; align-items:flex-start; justify-content:center; }
  .ll-right{ width:58%; padding:36px; display:flex; flex-direction:column; gap:14px; }
  .social-btn { width:100%; display:flex; gap:10px; align-items:center; justify-content:center; padding:10px 12px; border-radius:10px; border:1px solid rgba(10,20,40,.06); background:rgba(255,255,255,0.9); cursor:pointer; font-weight:600; transition: all 0.2s; }
  .social-btn:hover { background:rgba(10,35,66,0.05); }
  .divider { display:flex; align-items:center; gap:12px; color:#9aa4b2; font-size:13px; }
  .divider::before, .divider::after { content:""; flex:1; height:1px; background:rgba(10,20,40,.04); display:block; border-radius:2px; }
  .input-ll { padding:12px 14px; border-radius:10px; border:1px solid rgba(10,20,40,.06); font-size:15px; background:rgba(255,255,255,0.9); width:100%; }
  .input-ll:focus{ box-shadow:0 6px 22px rgba(10,163,255,0.08); border-color:#0077CC; outline:none; }
  .btn-ll { background: #0A2342; color:white; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer; border:none; box-shadow: 0 10px 30px rgba(10,35,66,0.12); transition: all 0.2s; }
  .btn-ll:hover { opacity: 0.9; }
  .close-ll { background:none;border:none;font-size:20px;color:#334155;cursor:pointer;z-index:130; }
  @media (max-width:900px) {
    .ll-card { flex-direction:column; width:92vw; }
    .ll-left{ width:100%; padding:20px; text-align:center; align-items:center;}
    .ll-right{ width:100%; padding:20px;}
  }

  .ll-toast {
    position: fixed;
    right: 20px;
    top: 20px;
    z-index: 150;
    background: linear-gradient(90deg,#00a3ff,#00eda8);
    color: white;
    padding: 12px 16px;
    border-radius: 10px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    display:none;
    font-weight:700;
  }

  .ll-role-badge { font-size:13px; font-weight:700; color:#0A2342; background:#eef2ff; padding:6px 10px; border-radius:10px; }

  header { 
    position: sticky; 
    top:0; 
    z-index:100;
    background: rgba(255,255,255,0.98);
    backdrop-filter: blur(10px);
    padding: 15px 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }
  
  .logo {
    font-weight: 800;
    font-size: 22px;
    color: #0A2342;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .sparkle { color: #0077CC; animation: sparklePulse 1.4s ease-in-out infinite; }
  
  @keyframes sparklePulse {
    0%, 100% { transform: scale(1); opacity: .9; }
    50% { transform: scale(1.45); opacity: 1; }
  }

  .premium-badge {
    display:inline-block; 
    background: linear-gradient(90deg, #0A2342, #0077CC); 
    padding: 8px 20px; 
    border-radius: 50px; 
    margin-bottom: 20px;
  }

  .trust-badge {
    display: flex; 
    align-items: center; 
    gap: 8px;
    opacity: 0.8;
    transition: opacity 0.3s;
  }
  .trust-badge:hover {
    opacity: 1;
  }

  .step-card {
    text-align: center;
    transition: transform 0.3s;
  }
  .step-card:hover {
    transform: translateY(-10px);
  }
  .step-number {
    width: 80px; 
    height: 80px; 
    background: linear-gradient(135deg, #0A2342, #0077CC); 
    border-radius: 20px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    margin: 0 auto 20px; 
    box-shadow: 0 10px 30px rgba(10,35,66,0.2);
    transition: transform 0.3s;
  }
  .step-card:hover .step-number {
    transform: rotate(5deg) scale(1.1);
  }

  .pricing-card {
    transition: all 0.3s;
  }
  .pricing-card.featured {
    border: 3px solid #0077CC !important;
    transform: scale(1.05);
    box-shadow: 0 20px 50px rgba(0,119,204,0.2);
  }
  .pricing-card:not(.featured):hover {
    transform: translateY(-10px);
  }

  html {
    scroll-behavior: smooth;
  }
</style>
</head>

<body>

<header>
  <div class="logo">LustroLindo <span class="sparkle">‚ú¶</span></div>
  
  <div style="position: absolute; left: 50%; transform: translateX(-50%); display:flex; gap:15px; align-items:center;">
    <span class="lang-toggle" onclick="setLang('it')" id="flag-it">üáÆüáπ</span>
    <span class="lang-toggle" onclick="setLang('en')" id="flag-en">üá¨üáß</span>
  </div>
  
  <div id="authContainer"></div>
</header>

<!-- HERO -->
<section class="text-center mt-24 mb-20 px-6">
  <div class="premium-badge">
    <span style="color: white; font-weight: 700; font-size: 13px; letter-spacing: 1px;" id="badge-text">SOLO PER CHI NON HA TEMPO DA PERDERE</span>
  </div>
  
  <h1 class="text-5xl md:text-6xl font-extrabold navy mb-6 tracking-tight" style="line-height: 1.1;" id="hero-title">
    Il tuo maggiordomo digitale.<br>
    <span style="background: linear-gradient(90deg, #0A2342, #0077CC); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Pulizie premium</span>, zero pensieri.
  </h1>

  <p class="text-lg md:text-xl text-gray-600 mb-10" style="max-width: 650px; margin: 0 auto 40px;" id="hero-subtitle">
    Dimentica cleaner inaffidabili, pagamenti in nero e weekend passati a pulire. 
    <strong>Ci pensiamo noi. Tu vivi.</strong>
  </p>

  <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; margin-bottom: 50px;">
    <button class="btn-primary" id="heroRequestBtn" style="padding: 14px 28px; font-size: 16px;">
      <span id="btn-request">Richiedi accesso</span> ‚Üí
    </button>
    <button class="btn-primary" id="heroLearnBtn" style="background: white; color: #0A2342; border: 2px solid #0A2342; padding: 14px 28px; font-size: 16px;" onclick="document.getElementById('how-it-works').scrollIntoView({behavior: 'smooth'})">
      <span id="btn-how">Come funziona</span>
    </button>
  </div>

  <div style="display: flex; gap: 40px; justify-content: center; align-items: center; flex-wrap: wrap; font-size: 14px; color: #6b7280;">
    <div class="trust-badge">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
      <span id="trust-verified">Cleaner verificati</span>
    </div>
    <div class="trust-badge">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
      <span id="trust-payments">Pagamenti sicuri</span>
    </div>
    <div class="trust-badge">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
      <span id="trust-insurance">Assicurazione inclusa</span>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section id="how-it-works" class="px-6 mb-24" style="max-width: 1200px; margin: 0 auto 96px;">
  <div class="text-center mb-16">
    <h2 class="text-4xl md:text-5xl font-extrabold navy mb-4" id="how-title">Come funziona</h2>
    <p class="text-lg md:text-xl text-gray-600" id="how-subtitle">3 step. Zero stress. Massima qualit√†.</p>
  </div>

  <div class="grid md:grid-cols-3 gap-12">
    <div class="step-card">
      <div class="step-number">
        <span style="color: white; font-size: 36px; font-weight: 800;">1</span>
      </div>
      <h3 class="text-xl font-bold navy mb-3" id="step1-title">Scegli il tuo piano</h3>
      <p class="text-gray-600" id="step1-text">Essentials, Premium o Elite. Tutti includono cleaner verificato, assicurazione e concierge dedicato.</p>
    </div>

    <div class="step-card">
      <div class="step-number">
        <span style="color: white; font-size: 36px; font-weight: 800;">2</span>
      </div>
      <h3 class="text-xl font-bold navy mb-3" id="step2-title">Ti assegniamo il tuo cleaner</h3>
      <p class="text-gray-600" id="step2-text">Stesso professionista, sempre. Conosce le tue preferenze. Noi gestiamo scheduling, pagamenti e tutto il resto.</p>
    </div>

    <div class="step-card">
      <div class="step-number">
        <span style="color: white; font-size: 36px; font-weight: 800;">3</span>
      </div>
      <h3 class="text-xl font-bold navy mb-3" id="step3-title">Tu non pensi a niente</h3>
      <p class="text-gray-600" id="step3-text">Casa sempre impeccabile. Zero preoccupazioni. Se c'√® un problema, lo risolviamo noi in &lt;1h.</p>
    </div>
  </div>
</section>

<!-- KPI CARDS -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-8 px-6 mb-24" style="max-width: 1200px; margin: 0 auto 96px;">
  <div class="card p-8 text-center">
    <div class="text-5xl font-bold navy mb-3">98%</div>
    <div class="text-gray-600 font-medium" id="kpi1">Clienti soddisfatti</div>
  </div>
  <div class="card p-8 text-center">
    <div class="text-5xl font-bold navy mb-3">&lt;24h</div>
    <div class="text-gray-600 font-medium" id="kpi2">Tempo di risposta</div>
  </div>
  <div class="card p-8 text-center">
    <div class="text-5xl font-bold navy mb-3">100%</div>
    <div class="text-gray-600 font-medium" id="kpi3">Cleaner verificati</div>
  </div>
</div>

<!-- PRICING SECTION -->
<section id="pricing" class="px-6 mb-24" style="max-width: 1200px; margin: 0 auto 96px;">
  <div class="text-center mb-16">
    <h2 class="text-4xl md:text-5xl font-extrabold navy mb-4" id="pricing-title">Piani su misura</h2>
    <p class="text-lg md:text-xl text-gray-600" id="pricing-subtitle">Scegli il piano perfetto per te. Cambia o cancella quando vuoi.</p>
  </div>

  <div class="grid md:grid-cols-3 gap-8">
    
    <!-- ESSENTIALS -->
    <div class="card pricing-card p-8" style="border: 2px solid #e5e7eb;">
      <div style="margin-bottom: 24px;">
        <h3 class="text-2xl font-bold navy mb-2">Essentials</h3>
        <p class="text-gray-600 text-sm" id="plan1-desc">Per chi vuole iniziare</p>
      </div>
      
      <div style="margin-bottom: 32px;">
        <div style="display: flex; align-items: baseline; gap: 8px;">
          <span class="text-5xl font-extrabold navy">‚Ç¨169</span>
          <span class="text-gray-600" id="per-month-1">/mese</span>
        </div>
      </div>

      <ul style="list-style: none; padding: 0; margin-bottom: 32px; display: flex; flex-direction: column; gap: 14px;">
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan1-feat1"><strong>4 cleaning al mese</strong> (3h ciascuno)</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan1-feat2">1 cleaning a settimana</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan1-feat3">Cleaner fisso verificato</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan1-feat4">Assicurazione inclusa</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan1-feat5">Concierge via WhatsApp</span>
        </li>
      </ul>

      <button class="btn-primary w-full py-3" onclick="startBookingFlow()"><span id="btn-start-1">Inizia ora</span></button>
    </div>

    <!-- PREMIUM -->
    <div class="card pricing-card featured p-8" style="position: relative;">
      <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: linear-gradient(90deg, #0A2342, #0077CC); color: white; padding: 6px 20px; border-radius: 50px; font-weight: 700; font-size: 12px; letter-spacing: 1px;">
        <span id="most-popular">PI√ô SCELTO</span>
      </div>
      
      <div style="margin-bottom: 24px;">
        <h3 class="text-2xl font-bold navy mb-2">Premium</h3>
        <p class="text-gray-600 text-sm" id="plan2-desc">Per professionisti esigenti</p>
      </div>
      
      <div style="margin-bottom: 32px;">
        <div style="display: flex; align-items: baseline; gap: 8px;">
          <span class="text-5xl font-extrabold navy">‚Ç¨299</span>
          <span class="text-gray-600" id="per-month-2">/mese</span>
        </div>
      </div>

      <ul style="list-style: none; padding: 0; margin-bottom: 32px; display: flex; flex-direction: column; gap: 14px;">
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan2-feat1"><strong>6 cleaning al mese</strong> (3h ciascuno)</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan2-feat2">1-2 cleaning a settimana</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan2-feat3">Tutto di Essentials +</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan2-feat4"><strong>Priority booking</strong></span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan2-feat5">1 deep cleaning incluso</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan2-feat6">Prodotti eco inclusi</span>
        </li>
      </ul>

      <button class="btn-primary w-full py-3" onclick="startBookingFlow()" style="box-shadow: 0 10px 30px rgba(0,119,204,0.3);"><span id="btn-start-2">Inizia ora</span></button>
    </div>

    <!-- ELITE -->
    <div class="card pricing-card p-8" style="border: 2px solid #e5e7eb;">
      <div style="margin-bottom: 24px;">
        <h3 class="text-2xl font-bold navy mb-2">Elite</h3>
        <p class="text-gray-600 text-sm" id="plan3-desc">White-glove service</p>
      </div>
      
      <div style="margin-bottom: 32px;">
        <div style="display: flex; align-items: baseline; gap: 8px;">
          <span class="text-5xl font-extrabold navy">‚Ç¨599</span>
          <span class="text-gray-600" id="per-month-3">/mese</span>
        </div>
      </div>

      <ul style="list-style: none; padding: 0; margin-bottom: 32px; display: flex; flex-direction: column; gap: 14px;">
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan3-feat1"><strong>8 cleaning al mese</strong> (4h ciascuno)</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan3-feat2">2 cleaning a settimana</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan3-feat3">Tutto di Premium +</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan3-feat4"><strong>Concierge 24/7</strong></span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan3-feat5">Stiratura illimitata</span>
        </li>
        <li style="display: flex; align-items: start; gap: 10px;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#0077CC" stroke-width="3" style="flex-shrink: 0; margin-top: 2px;"><polyline points="20 6 9 17 4 12"></polyline></svg>
          <span id="plan3-feat6">Gestione chiavi + grocery</span>
        </li>
      </ul>

      <button class="btn-primary w-full py-3" onclick="startBookingFlow()"><span id="btn-start-3">Inizia ora</span></button>
    </div>

  </div>

  <div class="text-center mt-16">
    <div class="card p-8" style="max-width: 700px; margin: 0 auto; background: linear-gradient(135deg, rgba(10,35,66,0.03), rgba(0,119,204,0.03));">
      <h3 class="text-xl font-bold navy mb-3" id="guarantee-title">üíé Garanzia 30 giorni</h3>
      <p class="text-gray-600" id="guarantee-text">Non sei soddisfatto? Rimborso completo, senza domande. Punto.</p>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="px-6 mb-20 grid md:grid-cols-2 gap-10" style="max-width: 1200px; margin: 0 auto 96px;">
  <div class="card p-10 text-center">
    <h2 class="text-2xl font-bold navy mb-2" id="cta-client">Per clienti</h2>
    <p class="text-gray-600 mb-6" id="cta-client-sub">Prenota, gestisci e rilassati.</p>
    <button class="btn-primary w-full py-3" id="startBookingBtn"><span id="btn-booking">Inizia prenotazione</span></button>
  </div>
  <div class="card p-10 text-center">
    <h2 class="text-2xl font-bold navy mb-2" id="cta-cleaner">Per cleaner</h2>
    <p class="text-gray-600 mb-6" id="cta-cleaner-sub">Turni ultra-ottimizzati con AI.</p>
    <button class="btn-primary w-full py-3" id="accessShiftsBtn"><span id="btn-shifts">Accedi ai turni</span></button>
  </div>
</section>

<footer class="text-center py-12 text-gray-500 text-sm">¬© 2025 LustroLindo ‚Äî The future of living.</footer>

<!-- BOOKING PANEL -->
<div id="bookingOverlay">
  <div id="bookingPanel">
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width: 25%;"></div>
    </div>
    
    <button class="panel-close" onclick="closeBooking()">‚úï</button>
    
    <div class="panel-header">
      <div style="font-size:14px;color:#6b7280;font-weight:600;margin-bottom:4px;" id="stepIndicator">Step 1 of 4</div>
      <h2 style="font-size:24px;font-weight:800;color:#0A2342;margin:0;" id="stepTitle">Che tipo di pulizia ti serve?</h2>
    </div>
    
    <div class="panel-content" id="panelContent"></div>
    
    <div style="padding: 0 30px 30px 30px;">
      <div class="panel-buttons">
        <button class="btn-back" id="btnBack" style="display:none;" onclick="prevStep()">‚Üê Indietro</button>
        <button class="btn-next" id="btnNext" onclick="nextStep()" disabled>Continua ‚Üí</button>
      </div>
    </div>
  </div>
</div>

<!-- LOGIN MODAL -->
<div id="llOverlay" class="ll-overlay">
  <div id="llCard" class="ll-card">
    <div class="ll-left">
      <div style="display:flex;align-items:center;gap:12px;">
        <svg width="140" height="30" viewBox="0 0 320 55" xmlns="http://www.w3.org/2000/svg">
          <defs><style>.t{font-family:Inter,system-ui;font-weight:800;font-size:28px;fill:#0A2342}</style></defs>
          <text class="t" x="0" y="30">LustroLindo</text>
          <g transform="translate(215,3)" fill="#00A3FF"><polygon points="8,0 11,6 17,8 11,10 8,17 5,10 0,8 5,6"/></g>
        </svg>
      </div>

      <h3 style="font-size:20px;font-weight:800;color:#0A2342;margin:0" id="modal-title">Bentornato ‚Äî facciamo brillare tutto ‚ú®</h3>
      <p style="color:#475569;font-size:14px;margin:0" id="modal-subtitle">Accesso sicuro alla tua dashboard.</p>

      <div style="margin-top:12px;width:100%"><div class="divider">Sicuro ‚Ä¢ Veloce ‚Ä¢ Scalabile</div></div>
    </div>

    <div class="ll-right">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <div style="font-size:14px;color:#94a3b8;font-weight:700;">Accedi a</div>
          <div style="display:flex;gap:8px;align-items:center">
            <div style="font-size:18px;font-weight:800;color:#0A2342;">Dashboard</div>
            <div id="llRoleBadge" class="ll-role-badge" style="display:none;">ROLE</div>
          </div>
        </div>
        <button id="llCloseBtn" class="close-ll">‚úï</button>
      </div>

      <div style="display:grid; gap:10px; margin-top:8px;">
        <button class="social-btn" id="llGoogle">
          <svg width="18" height="18" viewBox="0 0 533.5 544.3"><path fill="#4285F4" d="M533.5 278.4c0-17.6-1.6-34.6-4.6-51.1H272v96.8h146.9c-6.3 34-25.4 62.9-54.2 82.3v68.4h87.6c51.3-47.2 80.2-116.8 80.2-196.4z"/></svg>
          <span>Continua con Google</span>
        </button>

        <div style="display:flex; gap:10px;">
          <button class="social-btn" id="llApple" style="flex:1">
            <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M16.365 1.43c-.9.02-2.04.62-2.7 1.37-.58.68-1.1 1.74-.91 2.76 1.02.07 2.18-.58 2.8-1.35.57-.71 1.06-1.8.81-2.78zM12 6.6c-2.7 0-4.9 2.22-4.9 4.9 0 2.7 2.2 4.9 4.9 4.9 2.7 0 4.9-2.2 4.9-4.9C16.9 8.8 14.7 6.6 12 6.6z"/></svg>
            Apple
          </button>
          <button class="social-btn" id="llDemo" style="flex:1">üöÄ Demo</button>
        </div>
      </div>

      <div style="height:6px"></div>
      <div class="divider">oppure accedi con email</div>

      <form id="llForm" novalidate style="margin-top:10px;">
        <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:6px;">
          <label style="font-weight:700;color:#374151;">Email</label>
          <input id="llEmail" class="input-ll" type="email" autocomplete="email" placeholder="tu@azienda.com" required>
          <div id="llEmailErr" style="display:none;color:#ef4444;font-weight:600;font-size:13px;"></div>
        </div>

        <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:6px;">
          <label style="font-weight:700;color:#374151;">Password</label>
          <input id="llPassword" class="input-ll" type="password" autocomplete="current-password" placeholder="La tua password" required>
        </div>

        <button type="button" id="llSubmit" class="btn-ll" style="width:100%; margin-top:12px;">Accedi</button>
      </form>
    </div>
  </div>
</div>

<div id="llToast" class="ll-toast">‚úÖ Login effettuato</div>

<script>
const translations = {
  it: {
    badgeText: 'SOLO PER CHI NON HA TEMPO DA PERDERE',
    heroTitle: 'Il tuo maggiordomo digitale.<br><span style="background: linear-gradient(90deg, #0A2342, #0077CC); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Pulizie premium</span>, zero pensieri.',
    heroSubtitle: 'Dimentica cleaner inaffidabili, pagamenti in nero e weekend passati a pulire. <strong>Ci pensiamo noi. Tu vivi.</strong>',
    btnRequest: 'Richiedi accesso',
    btnHow: 'Come funziona',
    trustVerified: 'Cleaner verificati',
    trustPayments: 'Pagamenti sicuri',
    trustInsurance: 'Assicurazione inclusa',
    howTitle: 'Come funziona',
    howSubtitle: '3 step. Zero stress. Massima qualit√†.',
    step1Title: 'Scegli il tuo piano',
    step1Text: 'Essentials, Premium o Elite. Tutti includono cleaner verificato, assicurazione e concierge dedicato.',
    step2Title: 'Ti assegniamo il tuo cleaner',
    step2Text: 'Stesso professionista, sempre. Conosce le tue preferenze. Noi gestiamo scheduling, pagamenti e tutto il resto.',
    step3Title: 'Tu non pensi a niente',
    step3Text: 'Casa sempre impeccabile. Zero preoccupazioni. Se c\'√® un problema, lo risolviamo noi in <1h.',
    kpi1: 'Clienti soddisfatti',
    kpi2: 'Tempo di risposta',
    kpi3: 'Cleaner verificati',
    pricingTitle: 'Piani su misura',
    pricingSubtitle: 'Scegli il piano perfetto per te. Cambia o cancella quando vuoi.',
    plan1Desc: 'Per chi vuole iniziare',
    plan2Desc: 'Per professionisti esigenti',
    plan3Desc: 'White-glove service',
    perMonth: '/mese',
    mostPopular: 'PI√ô SCELTO',
    plan1Feat1: '<strong>4 cleaning al mese</strong> (3h ciascuno)',
    plan1Feat2: '1 cleaning a settimana',
    plan1Feat3: 'Cleaner fisso verificato',
    plan1Feat4: 'Assicurazione inclusa',
    plan1Feat5: 'Concierge via WhatsApp',
    plan2Feat1: '<strong>6 cleaning al mese</strong> (3h ciascuno)',
    plan2Feat2: '1-2 cleaning a settimana',
    plan2Feat3: 'Tutto di Essentials +',
    plan2Feat4: '<strong>Priority booking</strong>',
    plan2Feat5: '1 deep cleaning incluso',
    plan2Feat6: 'Prodotti eco inclusi',
    plan3Feat1: '<strong>8 cleaning al mese</strong> (4h ciascuno)',
    plan3Feat2: '2 cleaning a settimana',
    plan3Feat3: 'Tutto di Premium +',
    plan3Feat4: '<strong>Concierge 24/7</strong>',
    plan3Feat5: 'Stiratura illimitata',
    plan3Feat6: 'Gestione chiavi + grocery',
    btnStart: 'Inizia ora',
    guaranteeTitle: 'üíé Garanzia 30 giorni',
    guaranteeText: 'Non sei soddisfatto? Rimborso completo, senza domande. Punto.',
    ctaClient: 'Per clienti',
    ctaClientSub: 'Prenota, gestisci e rilassati.',
    btnBooking: 'Inizia prenotazione',
    ctaCleaner: 'Per cleaner',
    ctaCleanerSub: 'Turni ultra-ottimizzati con AI.',
    btnShifts: 'Accedi ai turni',
    toastLogin: '‚úÖ Login effettuato',
    toastLogout: '‚úÖ Logout effettuato',
    toastBooking: '‚úÖ Prenotazione confermata!'
  },
  en: {
    badgeText: 'ONLY FOR THOSE WHO HAVE NO TIME TO WASTE',
    heroTitle: 'Your digital butler.<br><span style="background: linear-gradient(90deg, #0A2342, #0077CC); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Premium cleaning</span>, zero worries.',
    heroSubtitle: 'Forget unreliable cleaners, cash payments and weekends spent cleaning. <strong>We take care of it. You live.</strong>',
    btnRequest: 'Request access',
    btnHow: 'How it works',
    trustVerified: 'Verified cleaners',
    trustPayments: 'Secure payments',
    trustInsurance: 'Insurance included',
    howTitle: 'How it works',
    howSubtitle: '3 steps. Zero stress. Maximum quality.',
    step1Title: 'Choose your plan',
    step1Text: 'Essentials, Premium or Elite. All include verified cleaner, insurance and dedicated concierge.',
    step2Title: 'We assign your cleaner',
    step2Text: 'Same professional, always. Knows your preferences. We manage scheduling, payments and everything else.',
    step3Title: 'You don\'t think about anything',
    step3Text: 'Always impeccable home. Zero worries. If there\'s a problem, we solve it in <1h.',
    kpi1: 'Satisfied clients',
    kpi2: 'Response time',
    kpi3: 'Verified cleaners',
    pricingTitle: 'Tailored plans',
    pricingSubtitle: 'Choose the perfect plan for you. Change or cancel anytime.',
    plan1Desc: 'For those who want to start',
    plan2Desc: 'For demanding professionals',
    plan3Desc: 'White-glove service',
    perMonth: '/month',
    mostPopular: 'MOST POPULAR',
    plan1Feat1: '<strong>4 cleanings per month</strong> (3h each)',
    plan1Feat2: '1 cleaning per week',
    plan1Feat3: 'Fixed verified cleaner',
    plan1Feat4: 'Insurance included',
    plan1Feat5: 'Concierge via WhatsApp',
    plan2Feat1: '<strong>6 cleanings per month</strong> (3h each)',
    plan2Feat2: '1-2 cleanings per week',
    plan2Feat3: 'Everything from Essentials +',
    plan2Feat4: '<strong>Priority booking</strong>',
    plan2Feat5: '1 deep cleaning included',
    plan2Feat6: 'Eco products included',
    plan3Feat1: '<strong>8 cleanings per month</strong> (4h each)',
    plan3Feat2: '2 cleanings per week',
    plan3Feat3: 'Everything from Premium +',
    plan3Feat4: '<strong>Concierge 24/7</strong>',
    plan3Feat5: 'Unlimited ironing',
    plan3Feat6: 'Key management + grocery',
    btnStart: 'Start now',
    guaranteeTitle: 'üíé 30-day guarantee',
    guaranteeText: 'Not satisfied? Full refund, no questions asked. Period.',
    ctaClient: 'For clients',
    ctaClientSub: 'Book, manage and relax.',
    btnBooking: 'Start booking',
    ctaCleaner: 'For cleaners',
    ctaCleanerSub: 'Ultra-optimized shifts with AI.',
    btnShifts: 'Access shifts',
    toastLogin: '‚úÖ Login successful',
    toastLogout: '‚úÖ Logged out',
    toastBooking: '‚úÖ Booking confirmed!'
  }
};

let currentLang = 'it';

function setLang(lang) {
  currentLang = lang;
  const t = translations[lang];
  
  document.getElementById('badge-text').innerText = t.badgeText;
  document.getElementById('hero-title').innerHTML = t.heroTitle;
  document.getElementById('hero-subtitle').innerHTML = t.heroSubtitle;
  document.getElementById('btn-request').innerText = t.btnRequest;
  document.getElementById('btn-how').innerText = t.btnHow;
  document.getElementById('trust-verified').innerText = t.trustVerified;
  document.getElementById('trust-payments').innerText = t.trustPayments;
  document.getElementById('trust-insurance').innerText = t.trustInsurance;
  document.getElementById('how-title').innerText = t.howTitle;
  document.getElementById('how-subtitle').innerText = t.howSubtitle;
  document.getElementById('step1-title').innerText = t.step1Title;
  document.getElementById('step1-text').innerText = t.step1Text;
  document.getElementById('step2-title').innerText = t.step2Title;
  document.getElementById('step2-text').innerText = t.step2Text;
  document.getElementById('step3-title').innerText = t.step3Title;
  document.getElementById('step3-text').innerHTML = t.step3Text;
  document.getElementById('kpi1').innerText = t.kpi1;
  document.getElementById('kpi2').innerText = t.kpi2;
  document.getElementById('kpi3').innerText = t.kpi3;
  document.getElementById('pricing-title').innerText = t.pricingTitle;
  document.getElementById('pricing-subtitle').innerText = t.pricingSubtitle;
  document.getElementById('plan1-desc').innerText = t.plan1Desc;
  document.getElementById('plan2-desc').innerText = t.plan2Desc;
  document.getElementById('plan3-desc').innerText = t.plan3Desc;
  document.getElementById('per-month-1').innerText = t.perMonth;
  document.getElementById('per-month-2').innerText = t.perMonth;
  document.getElementById('per-month-3').innerText = t.perMonth;
  document.getElementById('most-popular').innerText = t.mostPopular;
  document.getElementById('plan1-feat1').innerHTML = t.plan1Feat1;
  document.getElementById('plan1-feat2').innerText = t.plan1Feat2;
  document.getElementById('plan1-feat3').innerText = t.plan1Feat3;
  document.getElementById('plan1-feat4').innerText = t.plan1Feat4;
  document.getElementById('plan1-feat5').innerText = t.plan1Feat5;
  document.getElementById('plan2-feat1').innerHTML = t.plan2Feat1;
  document.getElementById('plan2-feat2').innerText = t.plan2Feat2;
  document.getElementById('plan2-feat3').innerText = t.plan2Feat3;
  document.getElementById('plan2-feat4').innerHTML = t.plan2Feat4;
  document.getElementById('plan2-feat5').innerText = t.plan2Feat5;
  document.getElementById('plan2-feat6').innerText = t.plan2Feat6;
  document.getElementById('plan3-feat1').innerHTML = t.plan3Feat1;
  document.getElementById('plan3-feat2').innerText = t.plan3Feat2;
  document.getElementById('plan3-feat3').innerText = t.plan3Feat3;
  document.getElementById('plan3-feat4').innerHTML = t.plan3Feat4;
  document.getElementById('plan3-feat5').innerText = t.plan3Feat5;
  document.getElementById('plan3-feat6').innerText = t.plan3Feat6;
  document.getElementById('btn-start-1').innerText = t.btnStart;
  document.getElementById('btn-start-2').innerText = t.btnStart;
  document.getElementById('btn-start-3').innerText = t.btnStart;
  document.getElementById('guarantee-title').innerText = t.guaranteeTitle;
  document.getElementById('guarantee-text').innerText = t.guaranteeText;
  document.getElementById('cta-client').innerText = t.ctaClient;
  document.getElementById('cta-client-sub').innerText = t.ctaClientSub;
  document.getElementById('btn-booking').innerText = t.btnBooking;
  document.getElementById('cta-cleaner').innerText = t.ctaCleaner;
  document.getElementById('cta-cleaner-sub').innerText = t.ctaCleanerSub;
  document.getElementById('btn-shifts').innerText = t.btnShifts;
}

// Booking logic
let currentStep = 1;
const bookingData = { service: null, date: null, time: null, cleaner: null };

const services = [
  { id: 'home', icon: 'üè†', name: 'Pulizia casa', price: 50 },
  { id: 'deep', icon: '‚ú®', name: 'Pulizia profonda', price: 80 },
  { id: 'move', icon: 'üì¶', name: 'Trasloco', price: 120 },
  { id: 'airbnb', icon: 'üè®', name: 'Airbnb', price: 60 }
];

const cleaners = [
  { id: 1, name: 'Giulia R.', emoji: 'üßº', rating: 4.9 },
  { id: 2, name: 'Marco V.', emoji: '‚ú®', rating: 4.7 },
  { id: 3, name: 'Sara L.', emoji: 'üßΩ', rating: 4.8 }
];

function startBookingFlow() {
  const user = getUserFromStorage();
  if(!user || user.role !== 'customer') {
    pendingAction = 'openBookingAfterLogin';
    openLogin('customer');
    return;
  }
  openBooking();
}

function openBooking() {
  currentStep = 1;
  bookingData.service = null;
  bookingData.date = null;
  bookingData.time = null;
  bookingData.cleaner = null;
  
  document.getElementById('bookingOverlay').style.display = 'flex';
  document.body.style.overflow = 'hidden';
  renderStep();
}

function closeBooking() {
  document.getElementById('bookingOverlay').style.display = 'none';
  document.body.style.overflow = '';
}

function renderStep() {
  const content = document.getElementById('panelContent');
  const stepTitle = document.getElementById('stepTitle');
  const stepIndicator = document.getElementById('stepIndicator');
  const btnBack = document.getElementById('btnBack');
  const btnNext = document.getElementById('btnNext');
  const progressFill = document.getElementById('progressFill');
  
  stepIndicator.innerText = `Step ${currentStep} of 4`;
  progressFill.style.width = (currentStep * 25) + '%';
  
  btnBack.style.display = currentStep > 1 ? 'block' : 'none';
  btnNext.innerText = currentStep === 4 ? 'Conferma prenotazione' : 'Continua ‚Üí';
  
  if(currentStep === 1) {
    stepTitle.innerText = 'Che tipo di pulizia ti serve?';
    content.innerHTML = '<div class="service-grid"></div>';
    const grid = content.querySelector('.service-grid');
    
    services.forEach(service => {
      const card = document.createElement('div');
      card.className = 'service-card';
      if(bookingData.service === service.id) card.classList.add('selected');
      card.innerHTML = `
        <div class="service-icon">${service.icon}</div>
        <div class="service-name">${service.name}</div>
        <div style="margin-top:8px;font-weight:700;color:#0A2342;">‚Ç¨${service.price}</div>
      `;
      card.onclick = () => {
        bookingData.service = service.id;
        renderStep();
        btnNext.disabled = false;
      };
      grid.appendChild(card);
    });
    
    btnNext.disabled = !bookingData.service;
  }
  else if(currentStep === 2) {
    stepTitle.innerText = 'Quando ti serve?';
    content.innerHTML = `
      <div class="calendar-container">
        <div style="margin-bottom:20px;">
          <h3 style="font-size:16px;font-weight:700;color:#0A2342;margin-bottom:12px;">Seleziona la data</h3>
          <div class="calendar-header">
            <div class="calendar-month">November 2025</div>
            <div class="calendar-nav">
              <button>‚Üê</button>
              <button>‚Üí</button>
            </div>
          </div>
          <div style="display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:12px;">
            ${['L','M','M','G','V','S','D'].map(d => `<div class="calendar-weekday">${d}</div>`).join('')}
          </div>
          <div class="calendar-grid" id="calendarGrid"></div>
        </div>
        
        <div>
          <h3 style="font-size:16px;font-weight:700;color:#0A2342;margin-bottom:12px;">Seleziona l'orario</h3>
          <div class="time-slots" id="timeSlots"></div>
        </div>
      </div>
    `;
    
    const calendarGrid = document.getElementById('calendarGrid');
    for(let i = 1; i <= 30; i++) {
      const day = document.createElement('div');
      day.className = 'calendar-day';
      if(i < 13) day.classList.add('disabled');
      if(bookingData.date === i) day.classList.add('selected');
      day.innerText = i;
      if(i >= 13) {
        day.onclick = () => {
          bookingData.date = i;
          renderStep();
        };
      }
      calendarGrid.appendChild(day);
    }
    
    const timeSlots = document.getElementById('timeSlots');
    ['09:00', '11:00', '13:00', '15:00', '17:00', '19:00'].forEach(time => {
      const slot = document.createElement('div');
      slot.className = 'time-slot';
      if(bookingData.time === time) slot.classList.add('selected');
      slot.innerText = time;
      slot.onclick = () => {
        bookingData.time = time;
        renderStep();
        btnNext.disabled = false;
      };
      timeSlots.appendChild(slot);
    });
    
    btnNext.disabled = !bookingData.date || !bookingData.time;
  }
  else if(currentStep === 3) {
    stepTitle.innerText = 'Scegli il tuo cleaner';
    content.innerHTML = '<div class="cleaner-grid"></div>';
    const grid = content.querySelector('.cleaner-grid');
    
    cleaners.forEach(cleaner => {
      const card = document.createElement('div');
      card.className = 'cleaner-card';
      if(bookingData.cleaner === cleaner.id) card.classList.add('selected');
      card.innerHTML = `
        <div class="cleaner-avatar">${cleaner.emoji}</div>
        <div class="cleaner-info">
          <div class="cleaner-name">${cleaner.name}</div>
          <div class="cleaner-meta">
            <span>‚≠ê ${cleaner.rating}</span>
            <span>‚Ä¢</span>
            <span>Disponibile</span>
          </div>
        </div>
      `;
      card.onclick = () => {
        bookingData.cleaner = cleaner.id;
        renderStep();
        btnNext.disabled = false;
      };
      grid.appendChild(card);
    });
    
    btnNext.disabled = !bookingData.cleaner;
  }
  else if(currentStep === 4) {
    stepTitle.innerText = 'Conferma la prenotazione';
    const service = services.find(s => s.id === bookingData.service);
    const cleaner = cleaners.find(c => c.id === bookingData.cleaner);
    
    content.innerHTML = `
      <div class="summary-box">
        <div class="summary-row">
          <span style="color:#6b7280;">Servizio</span>
          <strong>${service.name}</strong>
        </div>
        <div class="summary-row">
          <span style="color:#6b7280;">Data</span>
          <strong>${bookingData.date} Nov 2025</strong>
        </div>
        <div class="summary-row">
          <span style="color:#6b7280;">Orario</span>
          <strong>${bookingData.time}</strong>
        </div>
        <div class="summary-row">
          <span style="color:#6b7280;">Cleaner</span>
          <strong>${cleaner.name} ${cleaner.emoji}</strong>
        </div>
        <div class="summary-row">
          <span>Totale</span>
          <strong style="color:#0A2342;font-size:24px;">‚Ç¨${service.price}</strong>
        </div>
      </div>
    `;
    
    btnNext.disabled = false;
  }
}

function nextStep() {
  if(currentStep === 4) {
    showToast(translations[currentLang].toastBooking);
    closeBooking();
    return;
  }
  currentStep++;
  renderStep();
}

function prevStep() {
  if(currentStep > 1) {
    currentStep--;
    renderStep();
  }
}

// Auth
const AUTH_KEY = 'lustro_user';

function deriveNameFromEmail(email){
  if(!email) return '';
  const local = email.split('@')[0];
  return local.replace(/[._\-]/g,' ').split(' ').map(s => s.charAt(0).toUpperCase()+s.slice(1)).join(' ');
}

function saveUserToStorage(user){ localStorage.setItem(AUTH_KEY, JSON.stringify(user)); }
function getUserFromStorage(){
  try {
    const s = localStorage.getItem(AUTH_KEY);
    if(!s) return null;
    return JSON.parse(s);
  } catch(e){ return null; }
}
function clearUserStorage(){ localStorage.removeItem(AUTH_KEY); }

function renderAuthButton(){
  const container = document.getElementById('authContainer');
  const user = getUserFromStorage();
  container.innerHTML = '';
  if(user){
    const btn = document.createElement('button');
    btn.className = 'btn-primary';
    btn.innerText = 'Logout';
    btn.onclick = ()=> {
      clearUserStorage();
      renderAuthButton();
      showToast(translations[currentLang].toastLogout);
    };
    container.appendChild(btn);
  } else {
    const wrap = document.createElement('div');
    wrap.className = 'dropdown';
    wrap.innerHTML = `
      <button class="btn-primary">Login</button>
      <div class="dropdown-content">
        <button id="loginAsCustomerBtn">Login Customer</button>
        <button id="loginAsCleanerBtn">Login Cleaner</button>
      </div>
    `;
    container.appendChild(wrap);
    document.getElementById('loginAsCustomerBtn').addEventListener('click', ()=> openLogin('customer'));
    document.getElementById('loginAsCleanerBtn').addEventListener('click', ()=> openLogin('cleaner'));
  }
}

let pendingLoginRole = null;
let pendingAction = null;

function openLogin(role){
  pendingLoginRole = role || 'customer';
  const badge = document.getElementById('llRoleBadge');
  if(badge){
    badge.style.display = 'inline-block';
    badge.innerText = pendingLoginRole.toUpperCase();
  }
  openLLModal();
}

function openLLModal(){
  const overlay = document.getElementById('llOverlay');
  const card = document.getElementById('llCard');
  overlay.style.display = 'flex';
  setTimeout(()=> card.classList.add('show'), 20);
  document.body.style.overflow = 'hidden';
}

function closeLLModal(){
  const overlay = document.getElementById('llOverlay');
  const card = document.getElementById('llCard');
  card.classList.remove('show');
  setTimeout(()=> {
    overlay.style.display = 'none';
    document.body.style.overflow = '';
  }, 260);
}

function showToast(msg){
  const toast = document.getElementById('llToast');
  toast.innerText = msg;
  toast.style.display = 'block';
  setTimeout(()=> {
    toast.style.display = 'none';
  }, 2200);
}

(function(){
  const overlay = document.getElementById('llOverlay');
  const closeBtn = document.getElementById('llCloseBtn');
  const submitBtn = document.getElementById('llSubmit');
  const demoBtn = document.getElementById('llDemo');
  const googleBtn = document.getElementById('llGoogle');
  const emailInput = document.getElementById('llEmail');
  const pwdInput = document.getElementById('llPassword');

  closeBtn.addEventListener('click', closeLLModal);
  overlay.addEventListener('click', (e) => { if(e.target === overlay) closeLLModal(); });

  submitBtn.addEventListener('click', ()=>{
    const email = emailInput.value.trim();
    const name = deriveNameFromEmail(email);
    const role = pendingLoginRole || 'customer';
    const user = { name, email, role };

    saveUserToStorage(user);
    renderAuthButton();
    closeLLModal();
    showToast(translations[currentLang].toastLogin);

    if(role === 'customer' && pendingAction === 'openBookingAfterLogin') {
      openBooking();
    } else if(role === 'cleaner') {
      window.location.href = 'dashboard-cleaner.html';
    }
    pendingAction = null;
  });

  demoBtn.addEventListener('click', ()=> {
    emailInput.value = 'demo@lustrolindo.test';
    pwdInput.value = 'demo1234';
    submitBtn.click();
  });
  googleBtn.addEventListener('click', ()=> alert('Google login (simulato)'));
})();

renderAuthButton();

document.getElementById('heroRequestBtn').addEventListener('click', ()=> openLogin('customer'));
document.getElementById('startBookingBtn').addEventListener('click', ()=> startBookingFlow());
document.getElementById('accessShiftsBtn').addEventListener('click', ()=>{
  const user = getUserFromStorage();
  if(user && user.role === 'cleaner'){
    window.location.href = 'dashboard-cleaner.html';
  } else {
    openLogin('cleaner');
  }
});

window.addEventListener('load', ()=>{
  setLang('it');
  renderAuthButton();
});
</script>

</body>
</html>
