<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LustroLindo ‚Äì Dashboard Cleaner</title>
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Inter', system-ui, sans-serif;
  background: #F7F4EB;
  color: #0f172a;
  min-height: 100vh;
}

/* Header */
header {
  background: white;
  padding: 16px 40px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  position: sticky;
  top: 0;
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.logo {
  font-weight: 800;
  font-size: 24px;
  color: #0A2342;
  display: flex;
  align-items: center;
  gap: 8px;
}
.sparkle {
  color: #0077CC;
  animation: pulse 1.5s ease-in-out infinite;
}
@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.3); opacity: 1; }
}
.lang-toggle {
  cursor: pointer;
  font-size: 24px;
  transition: transform 0.2s;
}
.lang-toggle:hover { transform: scale(1.1); }
.logout-btn {
  background: #0A2342;
  color: white;
  font-weight: 600;
  border: none;
  padding: 12px 24px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}
.logout-btn:hover { opacity: 0.9; transform: translateY(-1px); }

/* Main Container */
main {
  max-width: 1400px;
  margin: 0 auto;
  padding: 40px 20px;
}

/* Pro Badge */
.pro-badge {
  background: linear-gradient(135deg, #f59e0b, #ea580c);
  color: white;
  padding: 8px 20px;
  border-radius: 50px;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 4px 12px rgba(245,158,11,0.3);
}

/* Cards */
.card {
  background: white;
  border-radius: 20px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  border: 2px solid #e2e8f0;
  transition: all 0.3s;
}
.card:hover {
  box-shadow: 0 8px 30px rgba(0,0,0,0.12);
  transform: translateY(-2px);
}
.card-header {
  padding: 24px 24px 16px 24px;
  border-bottom: 1px solid #f1f5f9;
}
.card-title {
  font-size: 20px;
  font-weight: 800;
  color: #0f172a;
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-content {
  padding: 24px;
}

/* Progress Banner */
.progress-banner {
  background: linear-gradient(135deg, #1e40af, #3b82f6);
  border-radius: 20px;
  padding: 32px;
  margin-bottom: 32px;
  color: white;
  box-shadow: 0 10px 40px rgba(30,64,175,0.3);
}
.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}
.progress-title {
  font-size: 24px;
  font-weight: 800;
}
.progress-subtitle {
  font-size: 14px;
  opacity: 0.9;
  margin-top: 4px;
}
.progress-count {
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
  padding: 8px 20px;
  border-radius: 50px;
  font-weight: 700;
}
.progress-bar-container {
  height: 12px;
  background: rgba(255,255,255,0.2);
  border-radius: 50px;
  overflow: hidden;
  margin-bottom: 24px;
}
.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #10b981, #34d399);
  border-radius: 50px;
  transition: width 0.6s ease;
  box-shadow: 0 0 20px rgba(16,185,129,0.5);
}
.upgrade-btn {
  background: white;
  color: #1e40af;
  border: none;
  padding: 14px 32px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.3s;
  width: 100%;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.upgrade-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

/* Pro Active Banner */
.pro-active-banner {
  background: linear-gradient(135deg, #ecfdf5, #d1fae5);
  border: 2px solid #10b981;
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 32px;
  display: flex;
  align-items: center;
  gap: 16px;
}
.pro-active-icon {
  width: 48px;
  height: 48px;
  background: #10b981;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}
.pro-active-text {
  flex: 1;
}
.pro-active-title {
  font-size: 18px;
  font-weight: 800;
  color: #065f46;
  margin-bottom: 4px;
}
.pro-active-subtitle {
  font-size: 14px;
  color: #047857;
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
  margin-bottom: 32px;
}
.stat-card {
  background: linear-gradient(135deg, #ffffff, #f8fafc);
  border: 2px solid #e2e8f0;
  border-radius: 20px;
  padding: 24px;
  transition: all 0.3s;
}
.stat-card:hover {
  border-color: #3b82f6;
  box-shadow: 0 8px 30px rgba(59,130,246,0.15);
  transform: translateY(-4px);
}
.stat-icon-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.stat-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}
.stat-value {
  font-size: 40px;
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 4px;
}
.stat-label {
  font-size: 13px;
  color: #64748b;
  font-weight: 600;
}
.stat-meta {
  font-size: 13px;
  color: #10b981;
  font-weight: 600;
  margin-top: 8px;
}

/* Chart */
.chart-container {
  background: linear-gradient(135deg, #f8fafc, #e0f2fe);
  border-radius: 16px;
  padding: 24px;
  border: 2px solid #e2e8f0;
  margin-bottom: 32px;
}
.chart-bars {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  height: 200px;
  gap: 8px;
}
.chart-bar-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}
.chart-bar {
  width: 100%;
  background: linear-gradient(180deg, #3b82f6, #1e40af);
  border-radius: 8px 8px 0 0;
  transition: all 0.3s;
  cursor: pointer;
  position: relative;
}
.chart-bar:hover {
  background: linear-gradient(180deg, #2563eb, #1e3a8a);
  transform: translateY(-4px);
}
.chart-bar-tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  background: #0f172a;
  color: white;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 700;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
}
.chart-bar:hover .chart-bar-tooltip {
  opacity: 1;
}
.chart-label {
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
}

/* Job Cards */
.job-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.job-card {
  background: linear-gradient(135deg, #f8fafc, #e0f2fe);
  border: 2px solid #e2e8f0;
  border-radius: 16px;
  padding: 24px;
  transition: all 0.3s;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 24px;
}
.job-card:hover {
  border-color: #3b82f6;
  box-shadow: 0 8px 30px rgba(59,130,246,0.15);
}
.job-info {
  flex: 1;
}
.job-title {
  font-size: 16px;
  font-weight: 700;
  color: #0f172a;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.job-badge {
  background: #dbeafe;
  color: #1e40af;
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.5px;
}
.job-meta {
  display: flex;
  flex-direction: column;
  gap: 8px;
  font-size: 14px;
  color: #64748b;
}
.job-meta-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.job-actions {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 12px;
}
.job-earnings {
  font-size: 32px;
  font-weight: 800;
  color: #0f172a;
}
.job-buttons {
  display: flex;
  gap: 8px;
}
.btn {
  padding: 10px 20px;
  border-radius: 10px;
  font-weight: 600;
  font-size: 14px;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-accept {
  background: #10b981;
  color: white;
}
.btn-accept:hover {
  background: #059669;
  transform: translateY(-2px);
}
.btn-reject {
  background: #ef4444;
  color: white;
}
.btn-reject:hover {
  background: #dc2626;
  transform: translateY(-2px);
}

/* Calendar */
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 12px;
}
.calendar-day {
  background: linear-gradient(135deg, #ffffff, #f8fafc);
  border: 2px solid #e2e8f0;
  border-radius: 16px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.3s;
  min-height: 120px;
}
.calendar-day:hover {
  border-color: #3b82f6;
  box-shadow: 0 8px 30px rgba(59,130,246,0.15);
  transform: translateY(-4px);
}
.calendar-day.empty {
  opacity: 0.5;
  cursor: default;
}
.calendar-day.empty:hover {
  border-color: #e2e8f0;
  box-shadow: none;
  transform: none;
}
.calendar-day-name {
  font-weight: 700;
  font-size: 14px;
  color: #0f172a;
  margin-bottom: 12px;
}
.calendar-shifts {
  background: #dbeafe;
  color: #1e40af;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 700;
  margin-bottom: 8px;
  display: inline-block;
}
.calendar-hours {
  font-size: 12px;
  color: #64748b;
  margin-bottom: 8px;
}
.calendar-earnings {
  font-size: 20px;
  font-weight: 800;
  color: #0f172a;
}
.calendar-no-shifts {
  font-size: 12px;
  color: #94a3b8;
  font-style: italic;
}

/* Calendar Details */
.calendar-details {
  margin-top: 24px;
  background: linear-gradient(135deg, #eff6ff, #dbeafe);
  border: 2px solid #3b82f6;
  border-radius: 16px;
  padding: 24px;
}
.calendar-details-title {
  font-size: 18px;
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 20px;
}
.calendar-details-summary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  padding-bottom: 20px;
  margin-bottom: 20px;
  border-bottom: 2px solid #bfdbfe;
}
.calendar-detail-item {
  text-align: center;
}
.calendar-detail-label {
  font-size: 12px;
  color: #64748b;
  margin-bottom: 4px;
}
.calendar-detail-value {
  font-size: 24px;
  font-weight: 800;
  color: #0f172a;
}
.calendar-shifts-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.calendar-shift-card {
  background: white;
  border: 1px solid #bfdbfe;
  border-radius: 12px;
  padding: 16px;
}
.calendar-shift-time {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  color: #1e40af;
  margin-bottom: 8px;
}
.calendar-shift-address {
  display: flex;
  align-items: start;
  gap: 8px;
  color: #64748b;
  margin-bottom: 12px;
  font-size: 14px;
}
.calendar-shift-notes {
  background: #fef3c7;
  border: 1px solid #fbbf24;
  border-radius: 8px;
  padding: 12px;
}
.calendar-shift-notes-label {
  font-size: 11px;
  font-weight: 700;
  color: #92400e;
  margin-bottom: 4px;
}
.calendar-shift-notes-text {
  font-size: 12px;
  color: #78350f;
}
  /* Upgrade Popup */
.popup-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  z-index: 10000;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}
.popup-overlay.show {
  display: flex;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.popup-content {
  background: linear-gradient(135deg, #ffffff, #f7fbff);
  border-radius: 24px;
  padding: 60px 50px;
  max-width: 600px;
  width: 90%;
  position: relative;
  box-shadow: 0 40px 100px rgba(0,0,0,0.4);
  border: 3px solid #3b82f6;
  animation: slideUp 0.5s ease;
  overflow: hidden;
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
.popup-emoji {
  font-size: 64px;
  margin-bottom: 20px;
  animation: bounce 0.6s ease infinite;
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
.popup-title {
  font-size: 32px;
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 16px;
  text-align: center;
}
.popup-text {
  font-size: 16px;
  color: #64748b;
  margin-bottom: 32px;
  text-align: center;
  line-height: 1.6;
}
.popup-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
}
.popup-btn-upgrade {
  background: linear-gradient(90deg, #1e40af, #3b82f6);
  color: white;
  padding: 16px 32px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 15px;
  border: none;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 12px rgba(30,64,175,0.3);
}
.popup-btn-upgrade:hover {
  opacity: 0.9;
  transform: translateY(-2px);
}
.popup-btn-close {
  background: #e2e8f0;
  color: #475569;
  padding: 16px 32px;
  border-radius: 12px;
  font-weight: 700;
  font-size: 15px;
  border: none;
  cursor: pointer;
  transition: all 0.3s;
}
.popup-btn-close:hover {
  background: #cbd5e1;
}

/* Confetti */
.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  opacity: 0;
  animation: confettiFall 3s ease-out forwards;
}
@keyframes confettiFall {
  0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(600px) rotate(720deg); opacity: 0; }
}

/* Responsive */
@media (max-width: 768px) {
  .stats-grid { grid-template-columns: 1fr; }
  .calendar-grid { grid-template-columns: repeat(3, 1fr); }
  .job-card { flex-direction: column; }
  .job-actions { align-items: flex-start; width: 100%; }
  .job-buttons { width: 100%; }
  .btn { flex: 1; }
}

footer {
  text-align: center;
  color: #64748b;
  font-size: 13px;
  margin-top: 60px;
  padding: 20px;
}
</style>
</head>
<body>

<header>
  <div class="logo">LustroLindo <span class="sparkle">‚ú¶</span></div>
  
  <div style="position: absolute; left: 50%; transform: translateX(-50%); display:flex; gap:15px; align-items:center;">
    <span class="lang-toggle" onclick="setLang('it')">üáÆüáπ</span>
    <span class="lang-toggle" onclick="setLang('en')">üá¨üáß</span>
  </div>
  
  <button class="logout-btn" id="logoutBtn">Logout</button>
</header>

<main id="mainContent">
  <!-- Content rendered by JavaScript -->
</main>

<footer>¬© 2025 LustroLindo ‚Äî The future of living.</footer>

<!-- Upgrade Popup -->
<div class="popup-overlay" id="upgradePopup">
  <div class="popup-content" id="popupContent">
    <div class="popup-emoji">üéâ</div>
    <h2 class="popup-title" id="popupTitle">Congratulations!</h2>
    <p class="popup-text" id="popupText">
      You've completed 3 free jobs! Ready to unlock unlimited earnings with Pro?
    </p>
    <div class="popup-buttons">
      <button class="popup-btn-upgrade" id="popupUpgradeBtn">Upgrade to Pro - ‚Ç¨29/mo</button>
      <button class="popup-btn-close" id="popupCloseBtn">Maybe later</button>
    </div>
  </div>
</div>

<script>
// Translations
const translations = {
  en: {
    welcome: "Welcome back, Cleaner!",
    subtitle: "Your shifts, earnings and appointments at a glance",
    proActive: "Pro Plan Active",
    proActiveDesc: "Unlimited jobs ‚Ä¢ Priority support ‚Ä¢ +15% rate boost",
    freeProgress: "Free Trial Progress",
    freeProgressDesc: "Complete {remaining} more job{s} to unlock Pro features!",
    jobsCompleted: "{count}/3 Jobs",
    upgradeBtnBanner: "üöÄ Upgrade to Pro - ‚Ç¨29/mo",
    totalWeek: "Total this week",
    shiftsCompleted: "Shifts completed",
    hoursWorked: "{hours} hours worked",
    avgHourly: "Average hourly",
    standardRate: "Standard rate",
    proBoost: "+15% Pro boost",
    weeklyEarnings: "Weekly Earnings",
    upcomingJobs: "Your Upcoming Jobs",
    maxJobsNote: "(Max 3 in Free plan)",
    workCalendar: "Work Calendar",
    accept: "Accept",
    reject: "Reject",
    shifts: "shift",
    shiftsPlural: "shifts",
    noShifts: "No shifts",
    dayDetails: "{day} Details",
    customerNotes: "Customer Notes:",
    popupTitle: "Congratulations!",
    popupText: "You've completed 3 free jobs! Ready to unlock unlimited earnings with Pro?",
    popupUpgrade: "Upgrade to Pro - ‚Ç¨29/mo",
    popupClose: "Maybe later",
    vsLastWeek: "‚ñ≤ +12% vs last week",
    weekDays: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun']
  },
  it: {
    welcome: "Bentornato, Cleaner!",
    subtitle: "I tuoi turni, guadagni e appuntamenti a colpo d'occhio",
    proActive: "Piano Pro Attivo",
    proActiveDesc: "Job illimitati ‚Ä¢ Supporto prioritario ‚Ä¢ +15% tariffa",
    freeProgress: "Progresso Prova Gratuita",
    freeProgressDesc: "Completa {remaining} altr{s} lavoro per sbloccare Pro!",
    jobsCompleted: "{count}/3 Lavori",
    upgradeBtnBanner: "üöÄ Passa a Pro - ‚Ç¨29/mese",
    totalWeek: "Totale settimana",
    shiftsCompleted: "Turni completati",
    hoursWorked: "{hours} ore lavorate",
    avgHourly: "Media oraria",
    standardRate: "Tariffa standard",
    proBoost: "+15% boost Pro",
    weeklyEarnings: "Guadagni Settimanali",
    upcomingJobs: "I Tuoi Prossimi Lavori",
    maxJobsNote: "(Max 3 nel piano Free)",
    workCalendar: "Calendario Lavori",
    accept: "Accetta",
    reject: "Rifiuta",
    shifts: "turno",
    shiftsPlural: "turni",
    noShifts: "Nessun turno",
    dayDetails: "Dettagli {day}",
    customerNotes: "Note Cliente:",
    popupTitle: "Congratulazioni!",
    popupText: "Hai completato 3 job gratuiti! Pronto a sbloccare guadagni illimitati con Pro?",
    popupUpgrade: "Passa a Pro - ‚Ç¨29/mese",
    popupClose: "Forse pi√π tardi",
    vsLastWeek: "‚ñ≤ +12% vs settimana scorsa",
    weekDays: ['Lun','Mar','Mer','Gio','Ven','Sab','Dom']
  }
};

let currentLang = 'en';
let isPro = false;
let completedJobsCount = 2;
let selectedDay = null;

// Jobs data
let freeJobs = [
  { 
    id: 1,
    title: "üè† Apartment ‚Äì Milan Center",
    date: "18 Nov",
    time: "09:00-12:00",
    location: "Via Tortona 15",
    earnings: 33,
    hours: 3,
    rate: 11,
    badge: "NEW",
    notes: "Prefer eco products, no pets"
  },
  { 
    id: 2,
    title: "üè¢ Office ‚Äì Porta Romana",
    date: "20 Nov",
    time: "14:00-17:00",
    location: "Corso Buenos Aires 42",
    earnings: 33,
    hours: 3,
    rate: 11,
    badge: "AVAILABLE",
    notes: "Office cleaning, keys at reception"
  },
  { 
    id: 3,
    title: "üè° Apartment ‚Äì Navigli",
    date: "22 Nov",
    time: "10:00-13:00",
    location: "Ripa di Porta Ticinese 12",
    earnings: 33,
    hours: 3,
    rate: 11,
    badge: "AVAILABLE",
    notes: "Customer will be home"
  }
];

let proJobs = [
  { 
    id: 1,
    title: "üè† Apartment ‚Äì Milan Center",
    date: "18 Nov",
    time: "09:00-12:00",
    location: "Via Tortona 15",
    earnings: 38,
    hours: 3,
    rate: 12.65,
    badge: "NEW",
    notes: "Prefer eco products, no pets"
  },
  { 
    id: 2,
    title: "üè¢ Office ‚Äì Porta Romana",
    date: "20 Nov",
    time: "14:00-17:00",
    location: "Corso Buenos Aires 42",
    earnings: 38,
    hours: 3,
    rate: 12.65,
    badge: "PREMIUM",
    notes: "Office cleaning, priority meeting room"
  },
  { 
    id: 3,
    title: "üè° Villa ‚Äì San Siro",
    date: "22 Nov",
    time: "10:00-14:00",
    location: "Via Novara 88",
    earnings: 51,
    hours: 4,
    rate: 12.65,
    badge: "URGENT",
    notes: "Villa with garden, extra attention to windows"
  },
  { 
    id: 4,
    title: "üè¢ Office ‚Äì Brera",
    date: "23 Nov",
    time: "15:00-18:00",
    location: "Via Fiori Chiari 8",
    earnings: 38,
    hours: 3,
    rate: 12.65,
    badge: "PREMIUM",
    notes: "Customer requests ironing service"
  },
  { 
    id: 5,
    title: "üè† Apartment ‚Äì Isola",
    date: "24 Nov",
    time: "09:00-12:00",
    location: "Via Borsieri 23",
    earnings: 38,
    hours: 3,
    rate: 12.65,
    badge: "AVAILABLE",
    notes: "Apartment with 2 bathrooms"
  },
  { 
    id: 6,
    title: "üè° Penthouse ‚Äì Duomo",
    date: "25 Nov",
    time: "14:00-18:00",
    location: "Corso Vittorio Emanuele II",
    earnings: 51,
    hours: 4,
    rate: 12.65,
    badge: "URGENT",
    notes: "Penthouse, delicate surfaces"
  }
];

const freeCalendar = [
  { day: 'Mon', shifts: 1, hours: 3, earnings: 33, details: [
    { time: '09:00-12:00', address: 'Via Tortona 15', notes: 'Prefer eco products, no pets' }
  ]},
  { day: 'Tue', shifts: 0, hours: 0, earnings: 0, details: [] },
  { day: 'Wed', shifts: 1, hours: 3, earnings: 33, details: [
    { time: '14:00-17:00', address: 'Corso Buenos Aires 42', notes: 'Office cleaning, keys at reception' }
  ]},
  { day: 'Thu', shifts: 0, hours: 0, earnings: 0, details: [] },
  { day: 'Fri', shifts: 1, hours: 3, earnings: 33, details: [
    { time: '10:00-13:00', address: 'Ripa di Porta Ticinese 12', notes: 'Customer will be home' }
  ]},
  { day: 'Sat', shifts: 0, hours: 0, earnings: 0, details: [] },
  { day: 'Sun', shifts: 0, hours: 0, earnings: 0, details: [] }
];

const proCalendar = [
  { day: 'Mon', shifts: 2, hours: 6, earnings: 76, details: [
    { time: '09:00-12:00', address: 'Via Tortona 15', notes: 'Prefer eco products, no pets' },
    { time: '14:00-17:00', address: 'Via Brera 8', notes: 'Deep clean kitchen' }
  ]},
  { day: 'Tue', shifts: 1, hours: 3, earnings: 38, details: [
    { time: '10:00-13:00', address: 'Corso Buenos Aires 42', notes: 'Office cleaning, priority meeting room' }
  ]},
  { day: 'Wed', shifts: 2, hours: 7, earnings: 89, details: [
    { time: '09:00-12:00', address: 'Via Novara 88', notes: 'Villa with garden, extra attention to windows' },
    { time: '14:00-18:00', address: 'Corso Vittorio Emanuele II', notes: 'Penthouse, delicate surfaces' }
  ]},
  { day: 'Thu', shifts: 1, hours: 3, earnings: 38, details: [
    { time: '15:00-18:00', address: 'Via Fiori Chiari 8', notes: 'Customer requests ironing service' }
  ]},
  { day: 'Fri', shifts: 2, hours: 6, earnings: 76, details: [
    { time: '09:00-12:00', address: 'Via Borsieri 23', notes: 'Apartment with 2 bathrooms' },
    { time: '14:00-17:00', address: 'Ripa di Porta Ticinese 12', notes: 'Regular customer, knows routine' }
  ]},
  { day: 'Sat', shifts: 2, hours: 7, earnings: 89, details: [
    { time: '10:00-14:00', address: 'Via Novara 88', notes: 'Weekly deep clean' },
    { time: '15:00-18:00', address: 'Via Tortona 15', notes: 'Pre-party cleaning' }
  ]},
  { day: 'Sun', shifts: 2, hours: 6, earnings: 76, details: [
    { time: '10:00-13:00', address: 'Corso Buenos Aires 42', notes: 'Weekend office maintenance' },
    { time: '14:00-17:00', address: 'Via Brera 8', notes: 'Post-event cleanup' }
  ]}
];

function t(key, vars = {}) {
  let text = translations[currentLang][key] || key;
  Object.keys(vars).forEach(k => {
    text = text.replace(`{${k}}`, vars[k]);
  });
  return text;
}

function setLang(lang) {
  currentLang = lang;
  render();
}
  function render() {
  const main = document.getElementById('mainContent');
  const jobs = isPro ? proJobs : freeJobs;
  const calendar = isPro ? proCalendar : freeCalendar;
  const weekDays = t('weekDays');
  
  const totalEarnings = isPro ? 418 : 99;
  const totalShifts = isPro ? 12 : 3;
  const totalHours = isPro ? 38 : 9;
  const avgRate = isPro ? 12.65 : 11;
  const chartData = isPro ? [66, 36, 91, 33, 66, 91, 66] : [33, 11, 33, 11, 33, 11, 0];
  
  main.innerHTML = `
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
      <div>
        <h1 style="font-size: 36px; font-weight: 800; color: #0f172a; margin-bottom: 8px;">
          ${t('welcome')} üëã
        </h1>
        <p style="color: #64748b; font-size: 16px;">${t('subtitle')}</p>
      </div>
      ${isPro ? `
        <div class="pro-badge">
          <span style="font-size: 20px;">üëë</span>
          PRO
        </div>
      ` : ''}
    </div>

    ${!isPro ? `
      <div class="progress-banner">
        <div class="progress-header">
          <div>
            <div class="progress-title">${t('freeProgress')}</div>
            <div class="progress-subtitle">
              ${t('freeProgressDesc', { remaining: 3 - completedJobsCount, s: (3 - completedJobsCount) > 1 ? 's' : '' })}
            </div>
          </div>
          <div class="progress-count">
            ${t('jobsCompleted', { count: completedJobsCount })}
          </div>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar-fill" style="width: ${(completedJobsCount / 3) * 100}%"></div>
        </div>
        <button class="upgrade-btn" onclick="showUpgradePopup()">
          ${t('upgradeBtnBanner')}
        </button>
      </div>
    ` : `
      <div class="pro-active-banner">
        <div class="pro-active-icon">‚ö°</div>
        <div class="pro-active-text">
          <div class="pro-active-title">${t('proActive')}</div>
          <div class="pro-active-subtitle">${t('proActiveDesc')}</div>
        </div>
      </div>
    `}

    <div class="stats-grid">
      <div class="stat-card" style="border-color: #bfdbfe;">
        <div class="stat-icon-row">
          <div class="stat-icon" style="background: #dbeafe; color: #1e40af;">üí∞</div>
          ${isPro ? '<div style="color: #10b981; font-size: 20px;">üìà</div>' : ''}
        </div>
        <div class="stat-value">‚Ç¨${totalEarnings}</div>
        <div class="stat-label">${t('totalWeek')}</div>
        ${isPro ? `<div class="stat-meta">${t('vsLastWeek')}</div>` : ''}
      </div>

      <div class="stat-card" style="border-color: #bbf7d0;">
        <div class="stat-icon-row">
          <div class="stat-icon" style="background: #dcfce7; color: #16a34a;">‚úì</div>
        </div>
        <div class="stat-value">${totalShifts}</div>
        <div class="stat-label">${t('shiftsCompleted')}</div>
        <div class="stat-meta" style="color: #64748b;">${t('hoursWorked', { hours: totalHours })}</div>
      </div>

      <div class="stat-card" style="border-color: #e9d5ff;">
        <div class="stat-icon-row">
          <div class="stat-icon" style="background: #f3e8ff; color: #9333ea;">‚è±Ô∏è</div>
        </div>
        <div class="stat-value">‚Ç¨${avgRate}</div>
        <div class="stat-label">${t('avgHourly')}</div>
        <div class="stat-meta" style="color: ${isPro ? '#10b981' : '#64748b'};">
          ${isPro ? t('proBoost') : t('standardRate')}
        </div>
      </div>
    </div>

    <div class="card" style="margin-bottom: 32px;">
      <div class="card-header">
        <div class="card-title">
          <span style="font-size: 20px;">üìä</span>
          ${t('weeklyEarnings')}
        </div>
      </div>
      <div class="card-content">
        <div class="chart-container">
          <div class="chart-bars">
            ${chartData.map((value, idx) => {
              const maxValue = Math.max(...chartData);
              const heightPx = value > 0 ? Math.max((value / maxValue) * 180, 20) : 4;
              return `
                <div class="chart-bar-wrapper">
                  <div class="chart-bar" style="height: ${heightPx}px; min-height: 20px;">
                    ${value > 0 ? `<div class="chart-bar-tooltip">‚Ç¨${value}</div>` : ''}
                  </div>
                  <div class="chart-label">${weekDays[idx]}</div>
                </div>
              `;
            }).join('')}
          </div>
        </div>
      </div>
    </div>

    <div class="card" style="margin-bottom: 32px;">
      <div class="card-header">
        <div class="card-title">
          <span style="font-size: 20px;">üìÖ</span>
          ${t('upcomingJobs')}
          ${!isPro ? `<span style="font-size: 14px; font-weight: 400; color: #64748b;">${t('maxJobsNote')}</span>` : ''}
        </div>
      </div>
      <div class="card-content">
        <div class="job-list" id="jobList"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-title">
          <span style="font-size: 20px;">üìÜ</span>
          ${t('workCalendar')}
        </div>
      </div>
      <div class="card-content">
        <div class="calendar-grid" id="calendarGrid"></div>
        <div id="calendarDetails"></div>
      </div>
    </div>
  `;
  
  renderJobs();
  renderCalendar();
}

function renderJobs() {
  const jobList = document.getElementById('jobList');
  const jobs = isPro ? proJobs : freeJobs;
  
  if (jobs.length === 0) {
    jobList.innerHTML = `
      <div style="text-align: center; padding: 40px; color: #94a3b8; font-style: italic;">
        ‚ú® All jobs assigned. Get ready for the next ones! ‚ú®
      </div>
    `;
    return;
  }
  
  jobList.innerHTML = jobs.map((job, idx) => `
    <div class="job-card">
      <div class="job-info">
        <div class="job-title">
          ${job.title}
          <span class="job-badge">${job.badge}</span>
        </div>
        <div class="job-meta">
          <div class="job-meta-row">
            <span>üìÖ</span>
            <span>${job.date} ‚Ä¢ ${job.time}</span>
          </div>
          <div class="job-meta-row">
            <span>üìç</span>
            <span>${job.location}</span>
          </div>
        </div>
      </div>
      <div class="job-actions">
        <div class="job-earnings">‚Ç¨${job.earnings}</div>
        <div style="font-size: 12px; color: #64748b; margin-bottom: 8px;">
          ${job.hours}h √ó ‚Ç¨${job.rate}/h
        </div>
        <div class="job-buttons">
          <button class="btn btn-accept" onclick="acceptJob(${idx})">
            ${t('accept')}
          </button>
          <button class="btn btn-reject" onclick="rejectJob(${idx})">
            ${t('reject')}
          </button>
        </div>
      </div>
    </div>
  `).join('');
}

function renderCalendar() {
  const calendarGrid = document.getElementById('calendarGrid');
  const calendar = isPro ? proCalendar : freeCalendar;
  const weekDays = t('weekDays');
  
  calendarGrid.innerHTML = calendar.map((day, idx) => `
    <div class="calendar-day ${day.shifts === 0 ? 'empty' : ''}" onclick="selectDay(${idx})">
      <div class="calendar-day-name">${weekDays[idx]}</div>
      ${day.shifts > 0 ? `
        <div class="calendar-shifts">
          ${day.shifts} ${day.shifts === 1 ? t('shifts') : t('shiftsPlural')}
        </div>
        <div class="calendar-hours">${day.hours}h</div>
        <div class="calendar-earnings">‚Ç¨${day.earnings}</div>
      ` : `
        <div class="calendar-no-shifts">${t('noShifts')}</div>
      `}
    </div>
  `).join('');
}

function selectDay(idx) {
  const calendar = isPro ? proCalendar : freeCalendar;
  const day = calendar[idx];
  const weekDays = t('weekDays');
  const detailsContainer = document.getElementById('calendarDetails');
  
  if (day.shifts === 0) {
    detailsContainer.innerHTML = '';
    return;
  }
  
  selectedDay = day;
  
  detailsContainer.innerHTML = `
    <div class="calendar-details">
      <div class="calendar-details-title">
        ${t('dayDetails', { day: weekDays[idx] })}
      </div>
      <div class="calendar-details-summary">
        <div class="calendar-detail-item">
          <div class="calendar-detail-label">${t('shiftsPlural')}</div>
          <div class="calendar-detail-value">${day.shifts}</div>
        </div>
        <div class="calendar-detail-item">
          <div class="calendar-detail-label">${t('hoursWorked', { hours: '' }).replace(' ', '')}</div>
          <div class="calendar-detail-value">${day.hours}h</div>
        </div>
        <div class="calendar-detail-item">
          <div class="calendar-detail-label">Earnings</div>
          <div class="calendar-detail-value">‚Ç¨${day.earnings}</div>
        </div>
      </div>
      <div class="calendar-shifts-list">
        ${day.details.map(detail => `
          <div class="calendar-shift-card">
            <div class="calendar-shift-time">
              <span>‚è∞</span>
              <span>${detail.time}</span>
            </div>
            <div class="calendar-shift-address">
              <span>üìç</span>
              <span>${detail.address}</span>
            </div>
            <div class="calendar-shift-notes">
              <div class="calendar-shift-notes-label">${t('customerNotes')}</div>
              <div class="calendar-shift-notes-text">${detail.notes}</div>
            </div>
          </div>
        `).join('')}
      </div>
    </div>
  `;
}

function acceptJob(idx) {
  const jobs = isPro ? proJobs : freeJobs;
  const job = jobs[idx];
  
  // Add to calendar
  const calendar = isPro ? proCalendar : freeCalendar;
  const dayIdx = Math.floor(Math.random() * 7);
  calendar[dayIdx].shifts++;
  calendar[dayIdx].hours += job.hours;
  calendar[dayIdx].earnings += job.earnings;
  calendar[dayIdx].details.push({
    time: job.time,
    address: job.location,
    notes: job.notes
  });
  
  // Remove from jobs
  jobs.splice(idx, 1);
  
  // Update progress
  if (!isPro) {
    completedJobsCount++;
    if (completedJobsCount >= 3) {
      setTimeout(() => showUpgradePopup(), 500);
    }
  }
  
  render();
}

function rejectJob(idx) {
  const jobs = isPro ? proJobs : freeJobs;
  jobs.splice(idx, 1);
  render();
}

function showUpgradePopup() {
  const popup = document.getElementById('upgradePopup');
  const content = document.getElementById('popupContent');
  
  // Generate confetti
  const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#a29bfe'];
  for(let i = 0; i < 50; i++) {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + '%';
    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.animationDelay = Math.random() * 0.5 + 's';
    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
    content.appendChild(confetti);
  }
  
  document.getElementById('popupTitle').innerText = t('popupTitle');
  document.getElementById('popupText').innerText = t('popupText');
  document.getElementById('popupUpgradeBtn').innerText = t('popupUpgrade');
  document.getElementById('popupCloseBtn').innerText = t('popupClose');
  
  popup.classList.add('show');
}

function closeUpgradePopup() {
  const popup = document.getElementById('upgradePopup');
  popup.classList.remove('show');
  
  // Remove confetti
  const confettis = document.querySelectorAll('.confetti');
  confettis.forEach(c => c.remove());
}

function upgradeToPro() {
  isPro = true;
  closeUpgradePopup();
  render();
}

// Event listeners
document.getElementById('logoutBtn').addEventListener('click', () => {
  localStorage.removeItem('lustro_user');
  window.location.href = 'index.html';
});

document.getElementById('popupUpgradeBtn').addEventListener('click', upgradeToPro);
document.getElementById('popupCloseBtn').addEventListener('click', closeUpgradePopup);

// Init
render();
</script>
</body>
</html>
