<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LustroLindo ‚Äì Dashboard Cleaner</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  font-family: 'Inter', system-ui, sans-serif;
  background-color: #F7F4EB;
  color: #0A2342;
}
header {
  background: #ffffff;
  padding: 15px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  position: sticky;
  top: 0;
  z-index: 1000;
}
.logo {
  font-weight: 800;
  font-size: 22px;
  color: #0A2342;
  display: flex;
  align-items: center;
  gap: 8px;
}
.sparkle { color: #0077CC; animation: sparklePulse 1.4s ease-in-out infinite; }
@keyframes sparklePulse { 0%,100% { transform: scale(1); opacity: .8; } 50% { transform: scale(1.3); opacity: 1; } }

.logout-btn {
  background: #0A2342;
  color: #fff;
  font-weight: 600;
  border: none;
  padding: 10px 18px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s;
}
.logout-btn:hover { opacity: .85; }

main { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
h1 { font-size: 28px; margin-bottom: 10px; font-weight: 800; }
.section { background: #ffffff; border-radius: 22px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); padding: 25px; margin-top: 25px; }
.section h2 { font-size: 20px; margin-bottom: 15px; color: #0A2342; font-weight: 800; }

/* Prossimi lavori */
.job-list { display: grid; gap: 15px; }
.job-item { background: #F8FAFC; border: 1px solid #eef2f7; padding: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; }
.job-info { display: flex; flex-direction: column; gap: 4px; }
.job-title { font-weight: 600; }
.job-meta { font-size: 14px; color: #4b5563; }
.job-btn { padding: 10px 18px; border-radius: 12px; font-weight:600; font-size:14px; cursor:pointer; border:none; transition:all 0.3s; }
.view-btn { background:#0A2342; color:white; }
.view-btn:hover { opacity: .85; }

/* Grafico guadagni */
.earnings-section { display:flex; flex-direction:column; }
.earnings-grid { display:flex; align-items:center; gap:20px; flex-wrap:wrap; }
.chart-container { flex:1; max-width:350px; }
.summary { display:flex; flex-direction:column; gap:6px; }
.total { font-size:24px; font-weight:700; color:#0A2342; }
.delta.positive { color:green; font-weight:600; }
.delta.negative { color:red; font-weight:600; }
.meta { color:#4b5563; font-size:14px; }

/* Calendario */
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 12px; margin-top:10px; }
.calendar-day { background: #F8FAFC; border-radius: 12px; padding: 12px; cursor: pointer; transition: all 0.2s; font-size: 14px; border: 1px solid #eef2f7; }
.calendar-day:hover { background: rgba(10,35,66,0.08); }
.calendar-day h3 { margin:0 0 6px 0; font-weight:600; }
.calendar-day .event { font-size:13px; color:#4b5563; margin-top:4px; }

footer { text-align:center; color:#6b7280; font-size:13px; margin-top:40px; padding:20px 0; }

/* Popup */
#popup { display:none; position:fixed; inset:0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); justify-content:center; align-items:center; z-index:10000; }
#popup div { background:#fff; padding:30px; border-radius:12px; text-align:center; box-shadow:0 2px 10px rgba(0,0,0,0.2); animation:fadeIn 0.3s ease; max-width:90%; }
@keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
#popup button { font-weight:600; font-size:14px; padding:10px 18px; border-radius:12px; cursor:pointer; border:none; transition:all 0.3s; }
#popup .accept-btn { background:#0A2342; color:white; }
#popup .accept-btn:hover { opacity: .85; }
#popup .reject-btn { background:#DC2626; color:white; }
#popup .reject-btn:hover { opacity: .85; }
#popup .close-btn { background:#6b7280; color:white; }
#popup .close-btn:hover { opacity: .85; }
</style>
</head>
<body>
<header>
  <div class="logo">LustroLindo <span class="sparkle">‚ú¶</span></div>
  <button class="logout-btn" id="logoutBtn">Logout</button>
</header>
<main>
  <h1>Welcome back, Cleaner! üëã</h1>
  <p style="color:#6b7280;">Here you'll find your shifts, earnings and confirmed appointments.</p>

  <!-- Prossimi lavori -->
  <div class="section">
    <h2>Your upcoming jobs</h2>
    <div class="job-list" id="jobList"></div>
  </div>

  <!-- Guadagni -->
  <div class="section earnings-section">
    <h2>Weekly earnings</h2>
    <div class="earnings-grid">
      <div class="chart-container"><canvas id="earningsChart" width="350" height="80"></canvas></div>
      <div class="summary">
        <div class="total">‚Ç¨410</div>
        <div class="delta positive">‚ñ≤ +8% vs last week</div>
        <div class="meta">5 completed jobs</div>
      </div>
    </div>
  </div>

  <!-- Calendario -->
  <div class="section">
    <h2>Work calendar</h2>
    <div class="calendar-grid" id="calendarGrid"></div>
  </div>
</main>
<footer>¬© 2025 LustroLindo ‚Äî The future of living.</footer>

<!-- Popup dettagli lavoro -->
<div id="popup">
  <div>
    <h3 id="popupTitle">Job details</h3>
    <p id="popupText"></p>
    <div style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:15px;">
      <button class="accept-btn" id="popupAccept">Accept</button>
      <button class="reject-btn" id="popupReject">Reject</button>
      <button class="close-btn" onclick="closePopup()">Close</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// ‚úÖ LOGOUT con cancellazione localStorage
const logoutBtn = document.getElementById("logoutBtn");
logoutBtn.addEventListener("click", ()=>{
  localStorage.removeItem('lustro_user');
  window.location.href="index.html";
});

const jobs = [
  { title: "üè† Apartment ‚Äì Milan Center", date: "8 Nov", time: "09:00 - 13:00", location: "Milan Center", details: "Complete cleaning kitchen, bathroom and living room" },
  { title: "üè¢ Office ‚Äì Porta Romana", date: "9 Nov", time: "14:00 - 18:00", location: "Porta Romana", details: "Cleaning desks, floors and meeting room" },
  { title: "üè° Villa ‚Äì San Siro", date: "11 Nov", time: "10:00 - 16:00", location: "San Siro", details: "General cleaning + garden" }
];

const jobList = document.getElementById("jobList");
function renderJobs() {
  jobList.innerHTML = "";
  if(jobs.length===0){
    jobList.innerHTML=`<div style="color:#4b5563; font-style:italic;">‚ú® All jobs have been assigned. üöÄ Get ready for the next ones! ‚ú®</div>`;
    return;
  }
  jobs.forEach((job,idx)=>{
    const div = document.createElement("div");
    div.className="job-item";
    div.innerHTML=`
      <div class="job-info">
        <div class="job-title">${job.title}</div>
        <div class="job-meta">${job.date}, ${job.time}</div>
      </div>
      <button class="job-btn view-btn">View</button>
    `;
    const viewBtn = div.querySelector(".view-btn");
    viewBtn.onclick = ()=>{
      showPopup(job,idx);
    };
    jobList.appendChild(div);
  });
}
renderJobs();

function showPopup(job,index){
  document.getElementById("popupTitle").innerText = job.title;
  document.getElementById("popupText").innerText = `${job.date}, ${job.time}\nDetails: ${job.details}`;
  document.getElementById("popup").style.display="flex";

  const acceptBtn=document.getElementById("popupAccept");
  const rejectBtn=document.getElementById("popupReject");

  acceptBtn.onclick = ()=>{
    addToCalendar(job);
    jobs.splice(index,1);
    renderJobs();
    closePopup();
  };
  rejectBtn.onclick = ()=>{
    jobs.splice(index,1);
    renderJobs();
    closePopup();
  };
}

function closePopup(){ document.getElementById("popup").style.display="none"; }

// Calendario lavori
const calendarJobs=[];
function addToCalendar(job){
  calendarJobs.push(job);
  renderCalendar();
}
const calendarGrid=document.getElementById("calendarGrid");
function renderCalendar(){
  calendarGrid.innerHTML="";
  const weekDays=['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
  weekDays.forEach((day,idx)=>{
    const dayDiv=document.createElement("div");
    dayDiv.className="calendar-day";
    const jobForDay=calendarJobs[idx]||null;
    dayDiv.innerHTML=`<h3>${day}</h3>${jobForDay ? `<div class="event">${jobForDay.title}<br>${jobForDay.time}</div>` : `<div class="event">No jobs</div>`}`;
    if(jobForDay){
      dayDiv.onclick=()=>{
        document.getElementById("popupTitle").innerText = jobForDay.title;
        document.getElementById("popupText").innerText = `${jobForDay.date}, ${jobForDay.time}\nDetails: ${jobForDay.details}`;
        document.getElementById("popup").style.display="flex";
      }
    }
    calendarGrid.appendChild(dayDiv);
  });
}
renderCalendar();

// Grafico guadagni
const ctx=document.getElementById('earningsChart').getContext('2d');
new Chart(ctx,{
  type:'bar',
  data:{ labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
    datasets:[{ label:'Earnings (‚Ç¨)', data:[50,60,40,70,30,50,40], backgroundColor:'#0077CC'}]
  },
  options:{ responsive:true, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true}}}
});
</script>
</body>
</html>
